CREATE DATABASE ProyectoDWES_08;

USE ProyectoDWES_08;

--TABLA DE USUARIO
CREATE TABLE USER(
    EMAIL VARCHAR (255) PRIMARY KEY,
    USERNAME VARCHAR(100) NOT NULL,
    PHONE_NUMBER VARCHAR(20) NOT NULL,
    PASSWORD_USER VARCHAR(255) NOT NULL,
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
);
--TABLA DE COCHE
CREATE TABLE CAR(
    ID_CAR VARCHAR(8) PRIMARY KEY NOT NULL,
    BRAND VARCHAR(255) NOT NULL,
    MODEL VARCHAR(255) NOT NULL,
    RELEASE_YEAR INT NOT NULL,
    DAY_PRICE DECIMAL( 10,2) NOT NULL,
    AVAILABLE BOOLEAN DEFAULT TRUE
);

--TABLA DE RESERVA
CREATE TABLE BOOKING(
    ID_BOOKING INT AUTO_INCREMENT PRIMARY KEY,
    EMAIL VARCHAR(255) NOT NULL,
    ID_CAR VARCHAR(8) NOT NULL,
    DATE_START DATE NOT NULL,
    DATE_FINISH DATE NOT NULL,
    TOTAL DECIMAL (10,2) NOT NULL,
    FOREIGN KEY (EMAIL) REFERENCES USER (EMAIL),
    FOREIGN KEY (ID_CAR) REFERENCES CAR (ID_CAR)
);

--TABLA DE PAGO
CREATE TABLE PAYMENT(
    ID_PAYMENT INT AUTO_INCREMENT PRIMARY KEY,
    ID_BOOKING INT NOT NULL,
    AMOUNT DECIMAL(10,2) NOT NULL,
    PAYMENT_DATE DATE NOT NULL,
    FOREIGN KEY (ID_BOOKING) REFERENCES BOOKING (ID_BOOKING)
);
