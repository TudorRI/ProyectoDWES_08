CREATE DATABASE ProyectoDWES_08;

USE ProyectoDWES_08;

--TABLA DE USUARIOS
CREATE TABLE USERS(
    EMAIL VARCHAR (255) PRIMARY KEY,
    USERNAME VARCHAR(100) REQUIRED NOT NULL,
    PHONE_NUMBER VARCHAR(20) REQUIRED NOT NULL,
    PASSWORD_USER VARCHAR(255) NOT NULL,
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
);
--TABLA DE COCHES
CREATE TABLE CARS(
    ID_CAR VARCHAR(8) PRIMARY KEY NOT NULL,
    FIRM VARCHAR(255) NOT NULL,
    MODEL VARCHAR(255) NOT NULL,
    YEAR_OF_CAR INT NOT NULL,
    DAY_PRICE DECIMAL( 10,2) NOT NULL,
    AVAIBLE BOOLEAN DEFAULT TRUE
);

--TABLA DE RESERVAS
CREATE TABLE BOOKINGS(
    ID_BOOKING INT AUTO_INCREMENT PRIMARY KEY,
    EMAIL INT NOT NULL,
    ID_CAR VARCHAR(8) NOT NULL,
    DATE_START DATE NOT NULL,
    DATE_FINISH DATE NOT NULL,
    TOTAL DECIMAL (10,2) NOT NULL,
    FOREING KEY (EMAIL) REFERENCES USERS (EMAIL),
    FOREING KEY (ID_CAR) REFERENCES CARS (ID_CAR)
);

--TABLA DE PAGOS
CREATE TABLE PAYMENT(
    ID_PAYMENT INT AUTO_INCREMENT PRIMARY KEY,
    ID_BOOKING INT NOT NULL,
    TO_PAY DECIMAL(10,2) NOT NULL,
    PAYMENT_DATE DATE NOT NULL,
    FOREING KEY (ID_BOOKING) REFERENCES BOOKINGS (ID_BOOKING)
);
